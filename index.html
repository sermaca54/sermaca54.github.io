<!DOCTYPE html>
<html>
  <head>
    <title>Testing</title>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/processing.js/1.6.6/processing.min.js"></script>
    <style>
    body {
      background-color: rgb(168, 236, 255);
    }

    #nube {
      width: 200px;
      position: absolute;
      top: 70px;
    }

    #nube_2 {
      width: 200px;
      position: absolute;
      top: 50px;
      right: 160px;
    }

    #nube_3 {
      width: 200px;
      position: absolute;
      top: -10px;
      left: 320px;
    }

    #arbol {
      width: 200px;
      height: 220px;
      position: absolute;
      top: 220px;
      left: 50px;
    }

    #arbol_2 {
      width: 200px;
      height: 220px;
      position: absolute;
      top: 220px;
      left: 750px;
    }

    #arbol_3 {
      width: 200px;
      height: 220px;
      position: absolute;
      top: 220px;
      left: 400px;
    }

    </style>
 </head>
 <body>
   <img id="nube" src="http://assets.stickpng.com/thumbs/580b585b2edbce24c47b2639.png">
   <img id="nube_2" src="http://assets.stickpng.com/thumbs/580b585b2edbce24c47b2639.png">
   <img id="nube_3" src="http://assets.stickpng.com/thumbs/580b585b2edbce24c47b2639.png">
   <img id="arbol" src="https://cdn.pixabay.com/photo/2017/09/28/00/40/trees-2793995_960_720.png">
   <img id="arbol_2" src="https://cdn.pixabay.com/photo/2017/09/28/00/40/trees-2793995_960_720.png">
   <img id="arbol_3" src="https://cdn.pixabay.com/photo/2017/09/28/00/40/trees-2793995_960_720.png">
  <script type="text/processing" data-processing-target="mysketch">

    void setup(){
       size(1000, 600);

     }

     var Car = function() {
        this.position = new PVector(700, 400);
        this.velocity = new PVector(0, 0);
        this.acceleration = new PVector(0, 0);
    };

    Car.prototype.update = function() {
         if (this.velocity.x <= 0 && this.acceleration.x < 0) {
            this.velocity.set(0,0);
            this.acceleration.set(0, 0);
        }
        this.velocity.add(this.acceleration);
        this.velocity.limit(10);

        this.position.add(this.velocity);

    };

    Car.prototype.display = function() {
        stroke(0);
        strokeWeight(2);
        fill(255, 0, 0);
        rect(this.position.x-52, this.position.y-59, 100, 50);
        rect(this.position.x-74, this.position.y-30, 150, 50);
        fill(92, 92, 92);
        ellipse(this.position.x + 30, this.position.y + 10, 50, 50);
        ellipse(this.position.x-40, this.position.y + 10, 50, 50);
    };

    Car.prototype.checkEdges = function() {
        if (this.position.x > 1100) {
            this.position.x = 0;
        }
        else if (this.position.x < 0) {
            this.position.x = width;
        }
    };

    var car = new Car();
    var masa = 40;
    var posicion_x = 750;
    var posicion_y = 540;
    var posicion_x_2 = 200;
    var posicion_y_2 = 540;

    var comprobar = function(x, y) {
      var d = dist(x, y, posicion_x, posicion_y);
      if (d < masa) {
          return true;
        }
    };

    var comprobar_2 = function(x, y) {
      var d = dist(x, y, posicion_x_2, posicion_y_2);
      if (d < masa) {
          return true;
        }
    };

    var boton_acelerar_pulsado = function() {
      fill(69, 67, 67);
      noStroke();
      ellipse(posicion_x, posicion_y, masa * 2, masa * 2);
    };

    var boton_acelerar_sin_pulsar = function() {
      fill(125, 125, 125);
      noStroke();
      ellipse(posicion_x, posicion_y, masa * 2, masa * 2);
    };

    var boton_frenar_pulsado = function() {
      fill(69, 67, 67);
      noStroke();
      ellipse(posicion_x_2, posicion_y_2, masa * 2, masa * 2);

    };

    var boton_frenar_sin_pulsar = function() {
      fill(125, 125, 125);
      noStroke();
      ellipse(posicion_x_2, posicion_y_2, masa * 2, masa * 2);

    };

    var carretera = function() {
      background(168, 236, 255);
      fill(59, 61, 61);
      noStroke();
      rect(0, 430, 1000, 60);
    };

    var tierra = function() {
      fill(115, 68, 14);
      noStroke();
      rect(0, 490, 1000, 150);
    };

    var paisaje = function() {
        var incAmount = 0.01;
        for (var t = 0; t < 10; t += incAmount) {
            var n = noise(t);
            var y = map(n, 0, 1, 0, 330);
            stroke(98, 166, 66);
            rect(t*100, 430 - y, 0, y);
        }
    };

    var paisaje_2 = function() {
        var incAmount = 0.01;
        for (var t = 0; t < 10; t += incAmount) {
            var n = noise(t);
            var y = map(n, 0, 1, 0, 360);
            stroke(69, 8, 17);
            rect(t*100, 430 - y, 0, y);
        }
    };

    var lineas_carretera = function() {
      fill(255, 255, 255);
      noStroke();
      rect(130, 450, 200, 10);
      rect(420, 450, 200, 10);
      rect(720, 450, 200, 10);

    };

    var sol = function() {
      noStroke();
      fill(255, 183, 0);
      ellipse(850, 80, 80, 80);
    };

    var boton_izquierdo_sin_pulsar = function() {
      fill(73, 74, 74);
      triangle(220, 515, 220, 565, 170, 540);
    };

    var boton_izquierdo_pulsado = function() {
      fill(39, 40, 41);
      triangle(220, 515, 220, 565, 170, 540);
    };

    var boton_derecho_sin_pulsar = function() {
      fill(73, 74, 74);
      triangle(730, 515, 730, 565, 775, 540);
    };

    var boton_derecho_pulsado = function() {
      fill(39, 40, 41);
      triangle(730, 515, 730, 565, 775, 540);
    };

    void draw() {
      background(168, 236, 255);
      carretera();
      tierra();
      paisaje_2();
      paisaje();
      lineas_carretera();
      sol();


      if (mousePressed && comprobar(mouseX, mouseY)) {
        car.acceleration.set(0.05, 0);
        boton_frenar_sin_pulsar();
        boton_izquierdo_sin_pulsar();
        boton_acelerar_pulsado();
        boton_derecho_pulsado();

    } else if (mousePressed && comprobar_2(mouseX, mouseY)) {
        car.acceleration.set(-0.05, 0);
        boton_acelerar_sin_pulsar();
        boton_derecho_sin_pulsar();
        boton_frenar_pulsado();
        boton_izquierdo_pulsado();

    } else {
        car.acceleration.set(0,0);
        boton_acelerar_sin_pulsar();
        boton_derecho_sin_pulsar();
        boton_frenar_sin_pulsar();
        boton_izquierdo_sin_pulsar();
    }
      car.update();
      car.checkEdges();
      car.display();


    }
  </script>

  <canvas id="mysketch"></canvas>

  <p>TESTTT</p>

 </body>
</html>
