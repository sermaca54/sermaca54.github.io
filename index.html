<!DOCTYPE html>
<html>
  <head>
    <title>Testing</title>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/processing.js/1.6.6/processing.min.js"></script>
    <style>
    body {
      background-color: rgb(168, 236, 255);
    }
    canvas {

    }


    </style>
 </head>
 <body>
  <script type="text/processing" data-processing-target="mysketch">

    void setup(){
       size(1000, 600);

     }

     var Car = function() {
        this.position = new PVector(700, 400);
        this.velocity = new PVector(0, 0);
        this.acceleration = new PVector(0, 0);
    };

    Car.prototype.update = function() {
         if (this.velocity.x <= 0 && this.acceleration.x < 0) {
            this.velocity.set(0,0);
            this.acceleration.set(0, 0);
        }
        this.velocity.add(this.acceleration);
        this.velocity.limit(10);

        this.position.add(this.velocity);

    };

    Car.prototype.display = function() {
        stroke(0);
        strokeWeight(2);
        fill(255, 0, 0);
        rect(this.position.x-52, this.position.y-59, 100, 50);
        rect(this.position.x-74, this.position.y-30, 150, 50);
        fill(92, 92, 92);
        ellipse(this.position.x + 30, this.position.y + 10, 50, 50);
        ellipse(this.position.x-40, this.position.y + 10, 50, 50);
    };

    Car.prototype.checkEdges = function() {
        if (this.position.x > 1100) {
            this.position.x = 0;
        }
        else if (this.position.x < 0) {
            this.position.x = width;
        }
    };

    var car = new Car();
    var masa = 40;
    var posicion_x = 750;
    var posicion_y = 540;
    var posicion_x_2 = 200;
    var posicion_y_2 = 540;

    var comprobar = function(x, y) {
      var d = dist(x, y, posicion_x, posicion_y);
      if (d < masa) {
          return true;
        }
    };

    var comprobar_2 = function(x, y) {
      var d = dist(x, y, posicion_x_2, posicion_y_2);
      if (d < masa) {
          return true;
        }
    };

    var boton_acelerar_pulsado = function() {
      fill(69, 67, 67);
      noStroke();
      ellipse(posicion_x, posicion_y, masa * 2, masa * 2);
    };

    var boton_acelerar_sin_pulsar = function() {
      fill(125, 125, 125);
      noStroke();
      ellipse(posicion_x, posicion_y, masa * 2, masa * 2);
    };

    var boton_frenar_pulsado = function() {
      fill(69, 67, 67);
      noStroke();
      ellipse(posicion_x_2, posicion_y_2, masa * 2, masa * 2);

    };

    var boton_frenar_sin_pulsar = function() {
      fill(125, 125, 125);
      noStroke();
      ellipse(posicion_x_2, posicion_y_2, masa * 2, masa * 2);

    };

    var carretera = function() {
      background(168, 236, 255);
      fill(59, 61, 61);
      noStroke();
      rect(0, 430, 1000, 60);
    };

    var tierra = function() {
      fill(115, 68, 14);
      noStroke();
      rect(0, 490, 1000, 150);
    };

    void draw() {
      background(168, 236, 255);
      carretera();
      tierra();
      fill(255, 255, 255);
      rect(130, 450, 200, 10);
      rect(420, 450, 200, 10);
      rect(720, 450, 200, 10);
      if (mousePressed && comprobar(mouseX, mouseY)) {
        car.acceleration.set(0.05, 0);
        boton_frenar_sin_pulsar();
        boton_acelerar_pulsado();

    } else if (mousePressed && comprobar_2(mouseX, mouseY)) {
        car.acceleration.set(-0.05, 0);
        boton_acelerar_sin_pulsar();
        boton_frenar_pulsado();

    } else {
        car.acceleration.set(0,0);
        boton_acelerar_sin_pulsar();
        boton_frenar_sin_pulsar();
    }
      car.update();
      car.checkEdges();
      car.display();
    }
  </script>

  <canvas id="mysketch"></canvas>

  <p>TESTTT</p>

 </body>
</html>
